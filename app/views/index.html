<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title>Home</title>

    <script type="text/javascript" src="/socket.io/socket.io.js"></script>
    
</head>
<body>
    <div>Connected to <span id="connection_num">0</span> peers</div>
    <div><textarea id="message"></textarea><br /><button onclick="sendMessage();">Send</button></div>
    <div id="room_link"></div>
    <div id="chatlog"></div>

    <!--<script>
        var server = {
            iceServers: [
                { url: "stun:stun.l.google.com:19302" },
                //{ url: "stun:stun1.l.google.com:19302" },
                { url: "stun:23.21.150.121" },
                { url: "turn:numb.viagenie.ca", credential: "awdrgyjilp", username: "mquewmor@sharklasers.com" }
            ]
        };

        var pc1, pc2, offer, answer;

        pc1 = new webkitRTCPeerConnection(server, {});
        pc2 = new webkitRTCPeerConnection(server, {});

        pc1.onicecandidate = function (candidate) {
            pc2.addIceCandidate(candidate);
        };

        pc2.onicecandidate = function (candidate) {
            pc1.addIceCandidate(candidate);
        };

        pc1.createOffer(onOfferCreated, onError);

        function onError(err) {
            window.alert(err.message);
        }

        function onOfferCreated(description) {
            offer = description;
            pc1.setLocalDescription(offer, onPc1LocalDescriptionSet, onError);
        }

        function onPc1LocalDescriptionSet() {
            // after this function returns, pc1 will start firing icecandidate events
            pc2.setRemoteDescription(offer, onPc2RemoteDescriptionSet, onError);
        }

        function onPc2RemoteDescriptionSet() {
            pc2.createAnswer(onAnswerCreated, onError);
        }

        function onAnswerCreated(description) {
            answer = description;
            pc2.setLocalDescription(answer, onPc2LocalDescriptionSet, onError);
        }

        function onPc2LocalDescriptionSet() {
            // after this function returns, you'll start getting icecandidate events on pc2
            pc1.setRemoteDescription(answer, onPc1RemoteDescriptionSet, onError);
        }

        function onPc1RemoteDescriptionSet() {
            window.alert('Yay, we finished signaling offers and answers');
        }
    </script>-->
    <script type="text/javascript" src="/js/main.js"></script>
</body>
</html>